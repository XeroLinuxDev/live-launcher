# Maintainer: XeroLinux <xerolinux@proton.me>

pkgname=live-launcher
pkgver=0.1.1
pkgrel=1
pkgdesc="XeroLinux Live Welcome Application"
arch=('x86_64')
url="https://xerolinux.xyz"
license=('GPL-3.0-or-later')
depends=('gtk4' 'libadwaita' 'polkit')
makedepends=('cargo' 'rust')
source=()
sha256sums=()

build() {
    cd "$srcdir/.."
    cargo build --release
}

package() {
    cd "$srcdir/.."

    # Install binary
    install -Dm755 "target/release/live-launcher" "$pkgdir/usr/bin/live-launcher"

    # Install logo
    install -Dm644 "xero.png" "$pkgdir/usr/share/live-launcher/xero.png"

    # Install icons
    install -dm755 "$pkgdir/usr/share/live-launcher/icons"
    install -Dm644 assets/*.svg "$pkgdir/usr/share/live-launcher/icons/"

    # Install autostart entry for live session
    install -Dm644 "live-launcher.desktop" "$pkgdir/etc/xdg/autostart/live-launcher.desktop"

    # Install icon for desktop entry
    install -Dm644 "xero.png" "$pkgdir/usr/share/pixmaps/live-launcher.png"
}
